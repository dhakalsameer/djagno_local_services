{% load static %}
<nav class="bg-white shadow mb-6">
  <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
    <!-- LEFT: Brand -->
    <a href="{% url 'home' %}" class="text-xl font-bold text-blue-600">
      ðŸ‡³ðŸ‡µ Local Services Nepal
    </a>

    <!-- RIGHT -->
    <div class="flex items-center space-x-6">
      {% if user.is_authenticated %}

      <!-- DASHBOARD / BOOKINGS LINK -->
      {% if user.profile.role == 'provider' %}
      <a
        href="{% url 'provider_dashboard' %}"
        class="{% if 'dashboard/provider' in request.path %}font-bold text-blue-600{% else %}text-gray-700 hover:text-blue-600{% endif %}"
      >
        Dashboard
      </a>
      {% else %}
      <a
        href="{% url 'customer_dashboard' %}"
        class="{% if 'dashboard/customer' in request.path %}font-bold text-blue-600{% else %}text-gray-700 hover:text-blue-600{% endif %}"
      >
        My Bookings
      </a>
      {% endif %}

      <!-- PROFILE DROPDOWN -->
      <div class="relative group flex items-center space-x-2 cursor-pointer">
        <!-- User Image -->
        {% if user.profile.profile_photo %}
        <img
          src="{{ user.profile.profile_photo.url }}"
          class="h-8 w-8 rounded-full object-cover"
          alt="Profile Photo"
        />
        {% else %}
        <img
          src="{% static 'default-avatar.png' %}"
          class="h-8 w-8 rounded-full object-cover"
          alt="Default Avatar"
        />
        {% endif %}

        <!-- Username + Arrow -->
        <button
          class="font-medium text-gray-700 hover:text-blue-600 focus:outline-none flex items-center space-x-1"
        >
          <span>{{ user.username }}</span>
          <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
            <path
              fill-rule="evenodd"
              d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z"
              clip-rule="evenodd"
            />
          </svg>
        </button>

        <!-- Dropdown Menu -->
        <div
          class="absolute right-0 mt-2 w-48 bg-white border rounded shadow-lg hidden group-hover:block group-focus-within:block z-50"
        >
          {% if user.profile.role == 'provider' %}
          <a
            href="{% url 'provider_dashboard' %}"
            class="block px-4 py-2 hover:bg-gray-100"
            >Provider Dashboard</a
          >
          {% else %}
          <a
            href="{% url 'customer_dashboard' %}"
            class="block px-4 py-2 hover:bg-gray-100"
            >My Bookings</a
          >
          {% endif %}

          <hr class="my-1" />

          <a
            href="{% url 'logout' %}"
            class="block px-4 py-2 text-red-600 hover:bg-gray-100"
            >Logout</a
          >
        </div>
      </div>

      {% else %}

      <!-- AUTH LINKS -->
      <a href="{% url 'login' %}" class="hover:underline">Login</a>
      <a href="{% url 'register' %}" class="hover:underline">Register</a>

      {% endif %}
    </div>
  </div>
</nav>
