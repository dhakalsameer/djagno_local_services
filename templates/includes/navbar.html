{% load static %}
<nav class="bg-white/80 backdrop-blur shadow-sm sticky top-0 z-50">
  <div class="max-w-7xl mx-auto px-6 py-3 flex justify-between items-center">

    <!-- LEFT: Brand + Home -->
    <div class="flex items-center space-x-6">
      <a href="{% url 'home' %}" class="text-xl font-extrabold tracking-tight text-blue-600 hover:text-blue-700 transition">
        ðŸ‡³ðŸ‡µ Local Services Nepal
      </a>

      <a
        href="{% url 'home' %}"
        class="px-3 py-2 rounded-md text-sm font-medium transition
        {% if request.path == '/' %}
          bg-blue-50 text-blue-700
        {% else %}
          text-gray-600 hover:text-blue-600 hover:bg-gray-100
        {% endif %}"
      >
        Home
      </a>
    </div>

    <!-- RIGHT -->
    <div class="flex items-center space-x-5">
      {% if user.is_authenticated %}

        {% if user.profile.role == 'provider' %}
          <a
            href="{% url 'provider_dashboard' %}"
            class="px-3 py-2 rounded-md text-sm font-medium transition
            {% if 'dashboard/provider' in request.path %}
              bg-blue-50 text-blue-700
            {% else %}
              text-gray-600 hover:text-blue-600 hover:bg-gray-100
            {% endif %}"
          >
            Dashboard
          </a>
        {% else %}
          <a
            href="{% url 'customer_dashboard' %}"
            class="px-3 py-2 rounded-md text-sm font-medium transition
            {% if 'dashboard/customer' in request.path %}
              bg-blue-50 text-blue-700
            {% else %}
              text-gray-600 hover:text-blue-600 hover:bg-gray-100
            {% endif %}"
          >
            My Bookings
          </a>
        {% endif %}

        <!-- PROFILE DROPDOWN -->
        <div class="relative group">
          <button class="flex items-center space-x-2 px-2 py-1 rounded-md hover:bg-gray-100 transition">
            {% if user.profile.profile_photo %}
              <img src="{{ user.profile.profile_photo.url }}" class="h-8 w-8 rounded-full object-cover ring-2 ring-blue-200" />
            {% else %}
              <img src="{% static 'default-avatar.png' %}" class="h-8 w-8 rounded-full object-cover ring-2 ring-blue-200" />
            {% endif %}
            <span class="text-sm font-medium text-gray-700">{{ user.username }}</span>
            <svg class="w-4 h-4 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z" clip-rule="evenodd" />
            </svg>
          </button>

          <div class="absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg opacity-0 scale-95 group-hover:opacity-100 group-hover:scale-100 transition transform origin-top-right z-50">
            {% if user.profile.role == 'provider' %}
              <a href="{% url 'provider_dashboard' %}" class="block px-4 py-2 text-sm hover:bg-gray-50">Provider Dashboard</a>
            {% else %}
              <a href="{% url 'customer_dashboard' %}" class="block px-4 py-2 text-sm hover:bg-gray-50">My Bookings</a>
            {% endif %}
            <hr class="my-1" />
            <a href="{% url 'logout' %}" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50">Logout</a>
          </div>
        </div>

      {% else %}

        <a href="{% url 'login' %}" class="text-sm font-medium text-gray-600 hover:text-blue-600">Login</a>
        <a href="{% url 'register' %}" class="px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-semibold hover:bg-blue-700 transition">Register</a>

      {% endif %}
    </div>
  </div>
</nav>
